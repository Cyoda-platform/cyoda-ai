{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Cyoda design",
    "type": "object",
    "entities": [
        {
            "entity_name": "data_ingestion_job",
            "entity_type": "JOB",
            "entity_source": "SCHEDULED",
            "depends_on_entity": "None",
            "entity_workflow": {
                "name": "data_ingestion_workflow",
                "class_name": "com.cyoda.tdb.model.treenode.TreeNodeEntity",
                "transitions": [
                    {
                        "name": "scheduled_data_ingestion",
                        "description": "Triggered by a scheduled job to ingest data.",
                        "start_state": "None",
                        "start_state_description": "Initial state before data ingestion.",
                        "end_state": "data_ingested",
                        "end_state_description": "Data has been successfully ingested.",
                        "process": {
                            "name": "ingest_data_process",
                            "description": "Process to ingest raw data from the specified data source.",
                            "adds_new_entites": "raw_data_entity"
                        }
                    },
                    {
                        "name": "aggregate_data",
                        "description": "Aggregate the ingested raw data.",
                        "start_state": "data_ingested",
                        "start_state_description": "Data has been ingested and is ready for aggregation.",
                        "end_state": "data_aggregated",
                        "end_state_description": "Data has been successfully aggregated.",
                        "process": {
                            "name": "aggregate_raw_data_process",
                            "description": "Process to aggregate raw data for reporting.",
                            "adds_new_entites": "aggregated_data_entity"
                        }
                    },
                    {
                        "name": "generate_and_send_report",
                        "description": "Generate a report and send it to admin via email.",
                        "start_state": "data_aggregated",
                        "start_state_description": "Data has been aggregated and is ready to be reported.",
                        "end_state": "report_sent",
                        "end_state_description": "Report has been successfully sent to admin.",
                        "process": {
                            "name": "generate_report_process",
                            "description": "Process to create a report and send it via email.",
                            "adds_new_entites": "report_entity"
                        }
                    }
                ]
            }
        },
        {
            "entity_name": "raw_data_entity",
            "entity_type": "EXTERNAL_SOURCES_PULL_BASED_RAW_DATA",
            "entity_source": "ENTITY_EVENT",
            "depends_on_entity": "data_ingestion_job",
            "entity_workflow": {
                "name": "raw_data_workflow",
                "class_name": "com.cyoda.tdb.model.treenode.TreeNodeEntity",
                "transitions": []
            }
        },
        {
            "entity_name": "aggregated_data_entity",
            "entity_type": "SECONDARY_DATA",
            "entity_source": "ENTITY_EVENT",
            "depends_on_entity": "data_ingestion_job",
            "entity_workflow": {
                "name": "aggregated_data_workflow",
                "class_name": "com.cyoda.tdb.model.treenode.TreeNodeEntity",
                "transitions": []
            }
        },
        {
            "entity_name": "report_entity",
            "entity_type": "SECONDARY_DATA",
            "entity_source": "ENTITY_EVENT",
            "depends_on_entity": "data_ingestion_job",
            "entity_workflow": {
                "name": "report_workflow",
                "class_name": "com.cyoda.tdb.model.treenode.TreeNodeEntity",
                "transitions": []
            }
        }
    ]
}