{"messages": [{"role": "system", "content": "You are a cyoda application builder assistant"}, {"role": "user", "content": "Generate Cyoda design json, based on the complete prd {\"### Validation of Your Requirement:\\\\Your requirement clearly states that you want an app to:\\\\1. **Collect data from various open data sources**: This is essential for gathering the necessary information for analysis.\\\\2. **Analyze the collected data**: This indicates the app\\'s need to process and derive insights from the data.\\3. **Send a digest**: This is the final output of the app, summarizing the findings for the users.\\\\### User Requirement Document:\\\\I will create a markdown document that includes:\\\\- **User Stories**: These will capture the specific needs of the users in a simple and understandable way.\\- **Journey Diagram**: This will visualize the process users go through while interacting with the app.\\\\- **Sequence Diagram**: This will depict the steps taken by the app to collect data, analyze it, and send the digest.\\\\### Explanation of Diagrams:\\\\- **Journey Diagram**: Helps in visualizing the user experience and identifying key interactions with the app.\\\\- **Sequence Diagram**: Illustrates the flow of processes and how different components of the app interact to fulfill the requirement.\\\\```\\\\journey\\title User Journey for Data Collection and Digest App\\\\section Collect Data\\\\User: 5: Collect data from open sources\\section Analyze Data\\\\User: 3: Analyze collected data\\\\section Send Digest\\\\User: 4: Send digest of findings\\```\\```\\sequenceDiagram\\participant U as User\\participant A as App\\participant DS as Data Source\\participant DA as Data Analysis\\U->>A: Request Data Collection\\A->>DS: Fetch data from open sources\\DS-->>A: Return Data\\A->>DA: Analyze Data\\DA-->>A: Return Analysis\\A->>U: Send Digest of Findings\"}. Use only lowercase underscore for namings. If the entity is saved in the workflow of another entity then its source will be ENTITY_EVENT. The JOB entity_source defaults to API_REQUEST. Prefer entity source/type mentioned in the prd, if it is unclear default to API_REQUEST or ENTITY_EVENT for secondary data. Avoid scheduler unless specified explicitly. You should not change entities or their workflows. You should not omit or add entities which are not listed in the prd. You should follow the complete prd 100% as it was confirmed.. Use this json schema http://json-schema.org/draft-07/schema# to understand how to structure your answer: {'$schema': 'http://json-schema.org/draft-07/schema#', 'title': 'Cyoda design', 'type': 'object', 'properties': {'entities': {'type': 'array', 'items': {'type': 'object', 'properties': {'entity_name': {'type': 'string'}, 'entity_type': {'type': 'string', 'enum': ['JOB', 'EXTERNAL_SOURCES_PULL_BASED_RAW_DATA', 'WEB_SCRAPING_PULL_BASED_RAW_DATA', 'TRANSACTIONAL_PULL_BASED_RAW_DATA', 'EXTERNAL_SOURCES_PUSH_BASED_RAW_DATA', 'WEB_SCRAPING_PUSH_BASED_RAW_DATA', 'TRANSACTIONAL_PUSH_BASED_RAW_DATA', 'SECONDARY_DATA', 'UTIL', 'CONFIG', 'BUSINESS_ENTITY']}, 'entity_source': {'type': 'string', 'enum': ['API_REQUEST', 'SCHEDULED', 'ENTITY_EVENT']}, 'depends_on_entity': {'type': 'string'}, 'entity_workflow': {'type': 'object', 'properties': {'name': {'type': 'string'}, 'class_name': {'type': 'string', 'enum': ['com.cyoda.tdb.model.treenode.TreeNodeEntity']}, 'transitions': {'type': 'array', 'items': {'type': 'object', 'properties': {'name': {'type': 'string'}, 'description': {'type': 'string'}, 'start_state': {'type': 'string'}, 'start_state_description': {'type': 'string'}, 'end_state': {'type': 'string'}, 'end_state_description': {'type': 'string'}, 'process': {'type': 'object', 'properties': {'name': {'type': 'string'}, 'description': {'type': 'string'}, 'adds_new_entites': {'type': 'string'}}, 'required': ['name', 'description', 'adds_new_entites']}}, 'required': ['name', 'start_state', 'end_state', 'process']}}}, 'required': ['name', 'class_name', 'transitions']}}, 'required': ['entity_name', 'entity_type', 'entity_source', 'depends_on_entity', 'entity_workflow']}}}, 'required': ['entities']}. It will be validated against this schema. Return only json (python dictionary)"}, {"role": "assistant", "content": "```json\n{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"title\": \"Cyoda design\",\n  \"type\": \"object\",\n  \"entities\": [\n    {\n      \"entity_name\": \"data_ingestion_job\",\n      \"entity_type\": \"JOB\",\n      \"entity_source\": \"API_REQUEST\",\n      \"depends_on_entity\": \"None\",\n      \"entity_workflow\": {\n        \"name\": \"data_ingestion_workflow\",\n        \"class_name\": \"com.cyoda.tdb.model.treenode.TreeNodeEntity\",\n        \"transitions\": [\n          {\n            \"name\": \"scheduled_data_ingestion\",\n            \"description\": \"Triggered by a scheduled job to ingest data.\",\n            \"start_state\": \"None\",\n            \"start_state_description\": \"Initial state before data ingestion.\",\n            \"end_state\": \"data_ingested\",\n            \"end_state_description\": \"Data has been successfully ingested.\",\n            \"process\": {\n              \"name\": \"ingest_raw_data\",\n              \"description\": \"Process to ingest raw data from the specified data source.\",\n              \"adds_new_entites\": \"raw_data_entity\"\n            }\n          }\n        ]\n      }\n    },\n    {\n      \"entity_name\": \"raw_data_entity\",\n      \"entity_type\": \"EXTERNAL_SOURCES_PULL_BASED_RAW_DATA\",\n      \"entity_source\": \"ENTITY_EVENT\",\n      \"depends_on_entity\": \"data_ingestion_job\",\n      \"entity_workflow\": {\n        \"name\": \"raw_data_entity_workflow\",\n        \"class_name\": \"com.cyoda.tdb.model.treenode.TreeNodeEntity\",\n        \"transitions\": []\n      }\n    },\n    {\n      \"entity_name\": \"aggregated_data_entity\",\n      \"entity_type\": \"SECONDARY_DATA\",\n      \"entity_source\": \"ENTITY_EVENT\",\n      \"depends_on_entity\": \"data_ingestion_job\",\n      \"entity_workflow\": {\n        \"name\": \"aggregated_data_entity_workflow\",\n        \"class_name\": \"com.cyoda.tdb.model.treenode.TreeNodeEntity\",\n        \"transitions\": []\n      }\n    },\n    {\n      \"entity_name\": \"report_entity\",\n      \"entity_type\": \"SECONDARY_DATA\",\n      \"entity_source\": \"ENTITY_EVENT\",\n      \"depends_on_entity\": \"data_ingestion_job\",\n      \"entity_workflow\": {\n        \"name\": \"report_entity_workflow\",\n        \"class_name\": \"com.cyoda.tdb.model.treenode.TreeNodeEntity\",\n        \"transitions\": []\n      }\n    }\n  ]\n}\n```"}]}